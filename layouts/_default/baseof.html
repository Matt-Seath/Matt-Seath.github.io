<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
  {{- partial "head.html" . -}}
</head>
<body>
  {{- partial "header.html" . -}}
  <main id="page">
    {{- block "main" . }}{{- end }}
  </main>
  {{- partial "footer.html" . -}}
  <script>
    // Header & mobile menu
    const siteHeader = document.querySelector('.site-header');
    const burger = document.querySelector('.header-burger-btn');
    const mobileMenu = document.querySelector('.mobile-menu');
    const closeMobileMenu = () => {
      if (mobileMenu) mobileMenu.classList.remove('active');
      if (burger) burger.classList.remove('active');
      if (siteHeader) siteHeader.classList.remove('menu-open');
    };
    if (burger && mobileMenu) {
      burger.addEventListener('click', () => {
        mobileMenu.classList.toggle('active');
        burger.classList.toggle('active');
        siteHeader.classList.toggle('menu-open');
      });
      for (const link of mobileMenu.querySelectorAll('a')) {
        link.addEventListener('click', closeMobileMenu);
      }
    }

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="/#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        const targetId = this.getAttribute('href').replace('/', '');
        const target = document.querySelector(targetId);
        if (target) {
          e.preventDefault();
          target.scrollIntoView({ behavior: 'smooth' });
          closeMobileMenu();
        }
      });
    });

    // Header scroll glass effect
    if (siteHeader) {
      window.addEventListener('scroll', () => {
        if (window.scrollY > 20) {
          siteHeader.classList.add('scrolled');
        } else {
          siteHeader.classList.remove('scrolled');
        }
      }, { passive: true });
    }

    // Scroll reveal with Intersection Observer
    const scrollElements = document.querySelectorAll('.animate-on-scroll');
    if (scrollElements.length > 0) {
      const observer = new IntersectionObserver((entries) => {
        for (const entry of entries) {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            observer.unobserve(entry.target);
          }
        }
      }, {
        threshold: 0.1,
        rootMargin: '0px 0px -80px 0px'
      });

      for (const el of scrollElements) {
        observer.observe(el);
      }
    }
  </script>
</body>
</html>
